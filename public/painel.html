<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Painel Chatbot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="/favicon.ico/favicon.ico">
  <link rel="stylesheet" href="/css/matrix.css">
  <link rel="stylesheet" href="/css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Painel Chatbot TI</a>

      <button class="navbar-toggler" type="button" id="customNavbarToggler"
              aria-controls="navbarNav" aria-expanded="false"
              aria-label="Alternar navegação">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/contacts">Contatos</a></li>
          <li class="nav-item"><a class="nav-link" href="/broadcast">Nova campanha</a></li>
          <li class="nav-item"><a class="nav-link" href="/tickets">Atendimentos</a></li>
          <li class="nav-item"><a class="nav-link" href="/topics">Tópicos</a></li>
          <li class="nav-item"><a class="nav-link" href="/promos">Promoções</a></li>
          <li class="nav-item"><a class="nav-link" href="/cadastros">Cadastros</a></li>
          <li class="nav-item"><a class="nav-link" href="/dashboard">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="/config">Configurações</a></li>
        </ul>

        <form class="d-flex" action="/sync-contacts" method="GET">
          <button class="btn btn-outline-light btn-sm" type="submit">
            Sincronizar contatos
          </button>
        </form>

        <button id="toggleMatrix" class="btn btn-outline-info btn-sm ms-2">Ativar Matrix</button>

        <form class="d-flex ms-2" action="/logout" method="GET">
          <button class="btn btn-outline-danger btn-sm" type="submit">
            Sair
          </button>
        </form>
      </div>
    </div>
  </nav>

  <main class="container mb-5">
    <!-- Cabeçalho e status rápidos -->
    <div class="row mb-3">
      <div class="col-lg-8 mx-auto">
        <h1 class="h4 mb-1">Bem-vindo ao painel da loja de TI</h1>
        <p class="text-muted mb-3">
          Acompanhe o status do seu chatbot, suas campanhas e atendimentos em um só lugar.
        </p>
      </div>
    </div>

    <!-- Linha de status -->
    <div class="row mb-4">
      <div class="col-lg-8 mx-auto">
        <div class="row g-2">
          <div class="col-md-4">
            <div class="alert alert-success py-2 mb-0" id="botStatusBox">
              <strong>Bot:</strong> <span id="botStatusText">Verificando...</span>
            </div>
          </div>
          <div class="col-md-4">
            <div class="alert alert-info py-2 mb-0">
              <strong>Plano:</strong> <span id="currentPlan">-</span>
            </div>
          </div>
          <div class="col-md-4">
            <div class="alert alert-warning py-2 mb-0">
              <strong>Vencimento:</strong> <span id="planExpires">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Métricas rápidas -->
    <div class="row mb-4">
      <div class="col-lg-8 mx-auto">
        <div class="row g-3">
          <div class="col-md-3">
            <div class="card text-center">
              <div class="card-body py-3">
                <div class="h5 mb-1" id="metricContacts">0</div>
                <div class="text-muted small">Contatos cadastrados</div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-center">
              <div class="card-body py-3">
                <div class="h5 mb-1" id="metricCampaigns">0</div>
                <div class="text-muted small">Campanhas enviadas</div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-center">
              <div class="card-body py-3">
                <div class="h5 mb-1" id="metricOpenTickets">0</div>
                <div class="text-muted small">Atendimentos em aberto</div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card text-center">
              <div class="card-body py-3">
                <div class="h5 mb-1" id="metricTodayMessages">0</div>
                <div class="text-muted small">Mensagens hoje</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ações principais -->
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <div class="card">
          <div class="card-body">
            <h2 class="h5 mb-3">Ações rápidas</h2>
            <p class="text-muted">
              Use os atalhos abaixo para operar o seu chatbot no dia a dia.
            </p>
            <div class="row g-3">
              <div class="col-md-4">
                <a href="/contacts" class="btn btn-outline-primary w-100">Ver contatos</a>
              </div>
              <div class="col-md-4">
                <a href="/broadcast" class="btn btn-outline-success w-100">Nova campanha</a>
              </div>
              <div class="col-md-4">
                <a href="/sync-contacts" class="btn btn-outline-secondary w-100">Sincronizar contatos</a>
              </div>
              <div class="col-md-4">
                <a href="/qr" class="btn btn-outline-danger w-100">Conectar WhatsApp</a>
              </div>
              <div class="col-md-4">
                <form action="/admin/clear-contacts" method="POST"
                      onsubmit="return confirm('Tem certeza que deseja limpar todos os contatos?');">
                  <button type="submit" class="btn btn-outline-warning w-100">
                    Limpar contatos
                  </button>
                </form>
              </div>
              <div class="col-md-4">
                <a href="/tickets" class="btn btn-outline-dark w-100">Atendimentos</a>
              </div>
            </div>

            <hr class="my-4">

            <div class="row">
              <div class="col-md-6">
                <h3 class="h6">Primeiros passos</h3>
                <ol class="small mb-0">
                  <li>Conecte seu WhatsApp em <a href="/qr">Conectar WhatsApp</a>.</li>
                  <li>Cadastre ou importe contatos em <a href="/contacts">Contatos</a>.</li>
                  <li>Crie sua primeira campanha em <a href="/broadcast">Nova campanha</a>.</li>
                </ol>
              </div>
              <div class="col-md-6">
                <h3 class="h6">Dicas rápidas</h3>
                <ul class="small mb-0">
                  <li>Use <strong>Tópicos</strong> para respostas automáticas e roteiros.</li>
                  <li>Acompanhe desempenho em <strong>Dashboard</strong>.</li>
                  <li>Gerencie plano e segurança em <strong>Configurações</strong>.</li>
                </ul>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-UBCjsMHi3bYm+vKjS0ViZjvCmI5QdbTm9HKHtdQ7N+bKOuwLzA1Sq7ZXu06RG2fT"
          crossorigin="anonymous"></script>
  <canvas id="matrix"></canvas>
  <script src="/js/matrix.js"></script>
  <script src="/js/summary.js" ></script>
</body>
</html>
